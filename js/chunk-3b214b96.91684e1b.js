(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b214b96"],{2708:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a={filters:{emptyCover:function(t){return t||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"},emptyAvatar:function(t){return t||"https://img.onl/H5eDF2"}}}},"2d2c":function(t,e,r){},"408a":function(t,e,r){var a=r("e330");t.exports=a(1..valueOf)},"56c3":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"left-content"},[r("Navbar")],1),r("div",{staticClass:"middle-content scrollbar"},[r("header",[r("img",{staticClass:"vector-primary",attrs:{src:"https://i.imgur.com/PYbiwrX.png",alt:""},on:{click:function(e){return t.$router.back()}}}),t._m(0)]),r("div",{staticClass:"tweet-section"},[r("div",{staticClass:"tweet-content"},[r("div",{staticClass:"user-avatar-name-account"},[r("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.UserId}}}},[r("img",{staticClass:"user-avatar",attrs:{src:t.tweet.avatar?t.tweet.avatar:t.avatarNone,alt:""}})]),r("div",{staticClass:"user-name-account"},[r("span",{staticClass:"user-name"},[t._v(t._s(t.tweet.name))]),r("span",{staticClass:"user-account"},[t._v("@"+t._s(t.tweet.account))])])],1),r("div",{staticClass:"tweet-description"},[t._v(" "+t._s(t.tweet.description)+" ")]),r("div",{staticClass:"tweet-time"},[t._v(t._s(t._f("fromNow")(t.tweet.tweetCreatedAt)))])]),r("div",{staticClass:"tweet-counts"},[r("p",{staticClass:"reply-count"},[t._v(" "+t._s(t.tweet.totalReplyCount)),r("span",[t._v(" 回覆")])]),r("p",{staticClass:"like-count"},[t._v(" "+t._s(t.tweet.totalLikeCount)),r("span",[t._v(" 喜歡次數")])])]),r("div",{staticClass:"tweet-actions"},[r("font-awesome-icon",{attrs:{"data-toggle":"modal","data-target":"#replyModal"+t.tweet.TweetId,icon:"fa-regular fa-comment"}}),t.tweet.isLike?r("font-awesome-icon",{staticClass:"fa-heart-active",attrs:{icon:"fa-regular fa-heart"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.deleteLike(t.tweet.TweetId)}}}):r("font-awesome-icon",{attrs:{icon:"fa-regular fa-heart"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addLike(t.tweet.TweetId)}}})],1)]),t._l(t.replylist,(function(t){return r("ReplyCard",{key:t.replyId,attrs:{"initial-reply-from-reply-list":t}})}))],2),r("div",{staticClass:"right-content"},[r("PopularList")],1),t.tweet.TweetId?r("ReplyModal",{attrs:{"reply-tweet":t.tweet},on:{"after-reply":t.tweet}}):t._e()],1)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"title"},[r("h4",[t._v("推文")])])}],s=r("5530"),i=r("1da1"),c=(r("b0c0"),r("96cf"),r("c1df")),o=r.n(c),l=r("d178"),u=r("d88d"),p=r("f47d"),f=r("2797"),d=r("6783"),m=r("44c2"),v=r.n(m),w=r("4cce"),y=r("2fa3"),h={components:{Navbar:l["a"],ReplyCard:u["a"],PopularList:p["a"],ReplyModal:f["a"]},filters:{fromNow:function(t){return o.a.locale("zh-tw",{meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){var r=t;return 12===r&&(r=0),"凌晨"===e||"早上"===e||"上午"===e?r:"下午"===e||"晚上"===e?r+12:r>=11?r:r+12},meridiem:function(t,e){var r=100*t+e;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"}}),o()(t).format("a HH:mm．YYYY年MM月DD日")}},data:function(){return{user:{Id:-1},tweet:{},users:[],replylist:[],avatarNone:v.a}},created:function(){this.fetchTweet(),this.fetchTweetReplies()},methods:{fetchTweet:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$route.params.tweet_id,e.next=4,d["a"].getTweet(r);case 4:a=e.sent,n=a.data,t.tweet=n,console.log("fetchTweet",t.tweet),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},fetchTweetReplies:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$route.params.tweet_id,e.next=4,d["a"].getTweetReplies(r);case 4:a=e.sent,n=a.data,t.replylist=n,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("getTweetReplies",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},addLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].addTweetLike(t);case 3:a=r.sent,n=a.data,e.tweet=Object(s["a"])(Object(s["a"])({},e.tweet),{},{isLike:n.isLike,totalLikeCount:n.totalLikeCount}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),y["a"].fire({icon:"error",title:"無法成功按讚，請稍後再試"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},deleteLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].deleteTweetLike(t);case 3:a=r.sent,n=a.data,e.tweet=Object(s["a"])(Object(s["a"])({},e.tweet),{},{totalLikeCount:n.totalLikeCount,isLike:n.isLike}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),y["a"].fire({icon:"error",title:"無法收回按讚，請稍後再試"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},renderCreateReply:function(t){var e=t.replyAccount,r=t.comment;this.replyList.unshift({avatar:this.profile.avatar,userName:this.profile.name,userAccount:this.profile.account,replyCreatedAt:new Date,replyAccount:e,comment:r,totalLikeCount:0,totalReplyCount:0})}}},C=h,b=(r("8202"),r("2877")),_=Object(b["a"])(C,a,n,!1,null,"3b679330",null);e["default"]=_.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("e330"),n=r("1d80"),s=r("577e"),i=r("5899"),c=a("".replace),o="["+i+"]",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),p=function(t){return function(e){var r=s(n(e));return 1&t&&(r=c(r,l,"")),2&t&&(r=c(r,u,"")),r}};t.exports={start:p(1),end:p(2),trim:p(3)}},8202:function(t,e,r){"use strict";r("2d2c")},"8ee4":function(t,e,r){},"983b":function(t,e,r){"use strict";r("8ee4")},a9e3:function(t,e,r){"use strict";var a=r("83ab"),n=r("da84"),s=r("e330"),i=r("94ca"),c=r("cb2d"),o=r("1a2d"),l=r("7156"),u=r("3a9b"),p=r("d9b5"),f=r("c04e"),d=r("d039"),m=r("241c").f,v=r("06cf").f,w=r("9bf2").f,y=r("408a"),h=r("58a8").trim,C="Number",b=n[C],_=b.prototype,g=n.TypeError,k=s("".slice),N=s("".charCodeAt),R=function(t){var e=f(t,"number");return"bigint"==typeof e?e:I(e)},I=function(t){var e,r,a,n,s,i,c,o,l=f(t,"number");if(p(l))throw g("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=h(l),e=N(l,0),43===e||45===e){if(r=N(l,2),88===r||120===r)return NaN}else if(48===e){switch(N(l,1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+l}for(s=k(l,2),i=s.length,c=0;c<i;c++)if(o=N(s,c),o<48||o>n)return NaN;return parseInt(s,a)}return+l};if(i(C,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var L,x=function(t){var e=arguments.length<1?0:b(R(t)),r=this;return u(_,r)&&d((function(){y(r)}))?l(Object(e),r,x):e},A=a?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;A.length>T;T++)o(b,L=A[T])&&!o(x,L)&&w(x,L,v(b,L));x.prototype=_,_.constructor=x,c(n,C,x)}},d88d:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"reply"},[r("div",{staticClass:"reply-img"},[r("router-link",{attrs:{to:{name:"user",params:{id:t.reply.UserId}}}},[r("img",{staticClass:"user-photo",attrs:{src:t._f("emptyAvatar")(t.reply.avatar),alt:""}})])],1),r("div",{staticClass:"reply-right"},[r("div",{staticClass:"user"},[r("span",{staticClass:"user-name"},[t._v(t._s(t.reply.userName))]),r("span",{staticClass:"user-account"},[t._v(t._s(t.reply.userAccount)+" ·"+t._s(t._f("fromNow")(t.reply.replyCreateAt)))])]),r("div",{staticClass:"tweet"},[r("p",{staticClass:"tweet-reply"},[t._v(" 回覆 "),r("span",{staticClass:"tweet-account"},[t._v(" @"+t._s(t.reply.replyAccount))])])]),r("div",{staticClass:"reply-content"},[t._v(" "+t._s(t.reply.comment)+" ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.initialCurrentUserId!==t.currentParams,expression:"initialCurrentUserId !== currentParams"}],staticClass:"reply-actions"},[r("div",{staticClass:"reply-action"},[r("font-awesome-icon",{attrs:{icon:"fa-regular fa-comment"}}),r("p",{staticClass:"reply-number"},[t._v(t._s(t.reply.totalReplyCount))])],1),r("div",{staticClass:"reply-action"},[r("font-awesome-icon",{attrs:{icon:"fa-regular fa-heart"}}),r("p",{staticClass:"like-number"},[t._v(t._s(t.reply.totalLikeCount))])],1)])])])},n=[],s=r("5530"),i=(r("a9e3"),r("2708")),c=r("c1df"),o=r.n(c),l={mixins:[i["a"]],components:{},filters:{fromNow:function(t){return t?o()(t).fromNow():"-"}},props:{initialCurrentUserId:{type:Number,required:!1},initialUserReply:{type:Object,required:!1},initialReplyFromReplyList:{type:Object,required:!1}},data:function(){return{reply:this.initialUserReply,currentParams:-1}},created:function(){var t=this.$route.params.id;this.currentParams=Number(t),this.initialUserReply||(this.reply=this.initialReplyFromReplyList)},watch:{initialUserReply:function(t){this.reply=Object(s["a"])(Object(s["a"])({},this.reply),t)},initialReply:function(t){console.log("replynewvalue",t);var e=t.UserId,r=t.avatar,a=t.comment,n=t.replyAccount,i=t.replyCreatedAt,c=t.replyId,o=t.totalLikeCount,l=t.totalReplyCount,u=t.userAccount,p=t.userName;this.reply=Object(s["a"])(Object(s["a"])({},this.reply),{},{UserId:e,avatar:r,comment:a,replyAccount:n,replyCreateAt:i,replyId:c,totalLikeCount:o,totalReplyCount:l,userAccount:u,userName:p})}}},u=l,p=(r("983b"),r("2877")),f=Object(p["a"])(u,a,n,!1,null,"449b6316",null);e["a"]=f.exports}}]);
//# sourceMappingURL=chunk-3b214b96.91684e1b.js.map