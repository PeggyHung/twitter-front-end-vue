(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d93c0a6"],{2708:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={filters:{emptyCover:function(t){return t||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"},emptyAvatar:function(t){return t||"https://img.onl/H5eDF2"}}}},"6a9c":function(t,e,a){},"7d03":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-container"},[a("div",{staticClass:"logo"},[a("img",{staticClass:"logo-img",attrs:{src:t.acLogo,alt:"logo-img"}})]),a("div",{staticClass:"navigation"},[a("router-link",{class:["nav-item",{"current-page":"admin-tweets"===t.currentPage}],attrs:{to:"/admin/tweets"}},[a("span",{staticClass:"nav-item-font icon-home-img"}),a("span",{staticClass:"nav-item-title"},[t._v("推文清單")])]),a("router-link",{class:["nav-item",{"current-page":"admin-users"===t.currentPage}],attrs:{to:"/admin/users"}},[a("span",{staticClass:"nav-item-font icon-self-img"}),a("span",{staticClass:"nav-item-title"},[t._v("使用者列表")])]),a("div",{staticClass:"nav-item logo-out"},[a("img",{staticClass:"nav-item-img",attrs:{src:t.logoutImg,alt:"setting-img"}}),a("span",{staticClass:"nav-item-title",on:{click:t.logout}},[t._v("登出")])])],1)])},s=[],r=(a("b0c0"),a("a535")),i=a.n(r),c=a("1ad8"),o=a.n(c),u={data:function(){return{currentPage:"",acLogo:i.a,logoutImg:o.a}},created:function(){this.currentPage=this.$route.name},methods:{logout:function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userAvatar"),this.$router.push("/signin")}}},l=u,d=(a("e60f"),a("2877")),m=Object(d["a"])(l,n,s,!1,null,"4109fc86",null);e["a"]=m.exports},be6c:function(t,e,a){"use strict";var n=a("2fa3"),s=function(){return localStorage.getItem("token")};e["a"]={getAdminTweets:function(){return n["b"].get("/admin/tweets",{headers:{Authorization:"Bearer ".concat(s())}})},getAdminUsers:function(){return n["b"].get("/admin/users",{headers:{Authorization:"Bearer ".concat(s())}})},deleteTweet:function(t){var e=t.tweetId;return n["b"].delete("/admin/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})}}},c10c:function(t,e,a){},df40:function(t,e,a){"use strict";a("c10c")},e60f:function(t,e,a){"use strict";a("6a9c")},fa6a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"left-content"},[a("AdminNavbar")],1),a("div",{staticClass:"right-content scrollbar"},[t._m(0),t.isLoading?a("Spinner"):a("div",[a("div",{staticClass:"tweets"},t._l(t.users,(function(e){return a("div",{key:e.id,staticClass:"tweet"},[a("div",{staticClass:"tweet-img"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.TweetId}}}},[a("img",{staticClass:"user-photo",attrs:{src:t._f("emptyAvatar")(e.avatar),alt:""}})])],1),a("div",{staticClass:"tweet-right"},[a("div",{staticClass:"tweet-right-top"},[a("div",{staticClass:"user"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.UserId}}}},[a("span",{staticClass:"user-name"},[t._v(t._s(e.name))]),a("span",{staticClass:"user-account"},[t._v("@"+t._s(e.account)+" ‧ ")])]),a("router-link",{attrs:{to:{name:"replylist",params:{tweet_id:e.TweetId}}}},[a("span",{staticClass:"tweet-time"},[t._v(t._s(t._f("fromNow")(e.tweetCreatedAt)))])])],1),a("div",{staticClass:"delete-tweet"},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-xmark"},on:{click:function(a){return t.deleteTweet(e.TweetId)}}})],1)]),a("div",{staticClass:"tweet-content"},[a("router-link",{attrs:{to:{name:"replylist",params:{tweet_id:e.TweetId}}}},[a("span",{staticClass:"tweet-content"},[t._v(t._s(e.description))])])],1)])])})),0)])],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("h4",[t._v("推文清單")])])}],r=a("1da1"),i=(a("96cf"),a("d9e2"),a("2708")),c=a("7d03"),o=a("be6c"),u=a("2fa3"),l=a("c1df"),d=a.n(l),m=a("2375"),f={mixins:[i["a"]],filters:{fromNow:function(t){return t?d()(t).fromNow():"-"}},components:{AdminNavbar:c["a"],Spinner:m["a"]},data:function(){return{users:[],isLoading:!0,continue:!1}},created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,o["a"].getAdminTweets();case 4:if(a=e.sent,n=a.data,console.log("data",n),200===a.status){e.next=9;break}throw new Error(n.statusText);case 9:t.users=n,t.isLoading=!1,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),t.isLoading=!1,u["a"].fire({icon:"error",title:"無法取得後台推文資料，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},deleteTweet:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.continue){a.next=9;break}return e.continue=!0,a.next=5,o["a"].deleteTweet({tweetId:t});case 5:n=a.sent,console.log("deleteResponse",n),e.fetchUsers(),e.continue=!1;case 9:a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),e.continue=!1,u["a"].fire({icon:"error",title:"無法刪除後台推文資料，請稍後再試"});case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},v=f,g=(a("df40"),a("2877")),p=Object(g["a"])(v,n,s,!1,null,"3c65475f",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-9d93c0a6.6db14d88.js.map