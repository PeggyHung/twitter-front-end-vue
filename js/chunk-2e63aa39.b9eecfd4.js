(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e63aa39"],{1465:function(t,a,s){},"1e3b":function(t,a,s){"use strict";s("1465")},"4a33":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"logo"},[s("img",{staticClass:"logo-img",attrs:{src:t.acLogo,alt:"AC-logo"}})]),s("h1",[t._v("登入 Alphitter")]),s("form",{staticClass:"w-100",on:{submit:function(a){return a.preventDefault(),a.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[s("div",{class:["form-label-group",{"wrong-form":t.isWronging}]},[s("label",{attrs:{for:"name"}},[t._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",required:"",autofocus:""},domProps:{value:t.account},on:{input:function(a){a.target.composing||(t.account=a.target.value)}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isWronging,expression:"isWronging"}],staticClass:"wrong-message"},[t._v("帳號不存在")])]),s("div",{class:["form-label-group",{"wrong-form":t.isWronging}]},[s("label",{attrs:{for:"password"}},[t._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",autocomplete:"new-password",required:""},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})]),s("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" 登入 ")]),s("div",{staticClass:"text-link text-center"},[s("p",[s("router-link",{staticClass:"regist",attrs:{to:"/regist"}},[t._v(" 註冊 Alphitter ")])],1),s("p",[t._v("‧")]),s("p",[s("router-link",{staticClass:"admin-login",attrs:{to:"/admin"}},[t._v(" 後台登入 ")])],1)])])])},r=[],o=s("1da1"),n=(s("96cf"),s("d9e2"),s("7696")),i=s("2fa3"),c=s("a535"),u=s.n(c),l={data:function(){return{account:"",password:"",isProcessing:!1,isWronging:!1,acLogo:u.a}},methods:{handleSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,e,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.account&&t.password){a.next=4;break}return i["a"].fire({icon:"warning",title:"請填入 account 和 password"}),a.abrupt("return");case 4:return t.isProcessing=!0,a.next=7,n["a"].signIn({account:t.account,password:t.password});case 7:if(s=a.sent,e=s.data,r=s.statusText,console.log(e.data),"OK"===r&&"success"===e.status){a.next=12;break}throw new Error(r);case 12:localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.user.id),localStorage.setItem("userAvatar",e.data.user.avatar),t.$store.commit("setCurrentUser",e.data.user),t.$router.push("/main"),a.next=25;break;case 19:a.prev=19,a.t0=a["catch"](0),t.password="",console.log(a.t0),t.isProcessing=!1,i["a"].fire({icon:"error",title:"帳號不存在或密碼錯誤，請重新輸入"});case 25:case"end":return a.stop()}}),a,null,[[0,19]])})))()}}},p=l,d=(s("1e3b"),s("2877")),m=Object(d["a"])(p,e,r,!1,null,"839b8170",null);a["default"]=m.exports},7696:function(t,a,s){"use strict";s("b0c0");var e=s("2fa3");a["a"]={signIn:function(t){var a=t.account,s=t.password;return e["b"].post("/login",{account:a,password:s})},regist:function(t){var a=t.account,s=t.name,r=t.email,o=t.password,n=t.checkPassword;return e["b"].post("/users",{account:a,name:s,email:r,password:o,checkPassword:n})},AdminSignin:function(t){var a=t.account,s=t.password;return e["b"].post("/admin/login",{account:a,password:s})}}}}]);
//# sourceMappingURL=chunk-2e63aa39.b9eecfd4.js.map